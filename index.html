<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>React Memory Game</title>
  <link rel="stylesheet" href="styles.css?002">

  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body>

<script>
window.onerror = function(message, source, line, col, error) {
  var text = error ? error.stack || error : message + ' (at ' + source + ':' + line + ':' + col + ')';
  errors.textContent += text + '\n';
  errors.style.display = 'block';
};
console.error = (function(old) {
  return function error() {
    errors.textContent += Array.prototype.slice.call(arguments).join(' ') + '\n';
    errors.style.display = 'block';
    old.apply(this, arguments);
  }
})(console.error);
</script>  
  
<div id="errors"></div>
<div id="root"></div>


<script type="text/babel">
const CARDS = [
  {path:"img/1.png", data:"1"},
  {path:"img/1.png", data:"1"},
  {path:"img/2.png", data:"2"},
  {path:"img/2.png", data:"2"},
  {path:"img/3.png", data:"3"},
  {path:"img/3.png", data:"3"},
  {path:"img/4.png", data:"4"},
  {path:"img/4.png", data:"4"},
  {path:"img/5.png", data:"5"},
  {path:"img/5.png", data:"5"},
  {path:"img/6.png", data:"6"},
  {path:"img/6.png", data:"6"}
];

class Game extends React.Component{
  render(){
    return(
      <div id="game">
        <div id="board">
          <Board />
        </div>
      </div>
    );
  }
}

class Board extends React.Component{
  constructor(props){
    super(props);
    this.state = {
      cardsShown:0
    }
    this.boardHandler = this.boardHandler.bind(this);
  }
  boardHandler(){
    this.state.cardsShown = this.state.cardsShown + 1;
    console.log(this.state.cardsShown);
  }
  render(){
    return(      
      CARDS.map((card,index) => (
        <Card index={index} path={card.path} data={card.data} key={index} boardHandler={this.boardHandler} />
      ))
    );
  }
}

class Card extends React.Component{
  constructor(props){
    super(props);
    this.state = {
      class: "card"
    }
    this.cardHandler = this.cardHandler.bind(this);
  }
  cardHandler(){
    this.props.boardHandler();
    this.state.class == "card" ? 
      this.setState({class:"card flip"}) : 
      this.setState({class:"card"});
  }  
  render(){
    return(
      <div className={this.state.class} key={this.props.index} onClick={this.cardHandler} >
        <img className="card-front" src={this.props.path} data-card={this.props.data} draggable="false" />
        <img className="card-back" src="img/cover.png" data-card={this.props.data} draggable="false" />
      </div>
    );
  }
}

ReactDOM.render(<Game />, document.getElementById("root"));
</script>

</body>
</html>